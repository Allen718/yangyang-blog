## 收集记账页面的数据，
我们应该对每次记账的数据进行保存，首先在Money.vue组件里面定义一个数据，并声明类型，然后定义好这些组件需要接受的初始值，当各组件的只改变，就传递给外面，然后外面修改并保存。
  ```
   const [selected, setSelected] = useState({
    tags: [] as string[],
    note: '',
    category: '-' as Category,
    amount: 0
  });
    {selected.tags.join(',')}
      <hr/>
      {selected.note}
      <hr/>
      {selected.category}
      <hr/>
      {selected.amount}
      <TagsSection value={selected.tags}
                   onChange={(tags) => setSelected({
                     ...selected,
                     tags: tags
                   })}/>
      <NoteSection value={selected.note}
                   onChange={(note) => {
                     setSelected({
                       ...selected,
                       note: note
                     });
                   }}/>
      <CategorySection value={selected.category}
                       onChange={(category) => {
                         setSelected({
                           ...selected,
                           category: category
                         });
                       }}
      />
      <NumberPadSection value={selected.amount}
                        onChange={(amount) => {
                          setSelected({
                            ...selected,
                            amount: amount
                          });
                        }}
                        onOk={() => {}}
              />
   ```
        
   
   ### catagorysection部分
   ```
        type Props = {
                 value: '-' | '+',
                 onChange: (value: '-' | '+') => void;
                      }
        const CategorySection: React.FC<Props> = (props) => {
          const categoryMap = {'-': '支出', '+': '收入'};
          const [categoryList] = useState<('+' | '-')[]>(['-', '+']);
          const category = props.value;
  return (
    <Wrapper>
      <ul>
        {categoryList.map(c =>
          <li key={c}
              className={category === c ? 'selected' : ''}
                onClick={() => {props.onChange(c);}}
          >{categoryMap[c]}
          </li>
        )}

  ```
### Notesection部分：
  ```
  type Props = {
  value: string;
  onChange: (value: string) => void;
}
const NoteSection: React.FC<Props> = (props) => {
  const note = props.value
  const refInput = useRef<HTMLInputElement>(null);
  const onBlur = () => {
    if (refInput.current !== null) {
      setNote(refInput.current.value);
      props.onChange(refInput.current.value);
    }
  };
        
 ``` 
 ### NumberPadSection部分：
 ```
  type Props = {
  value: number;
  onChange: (value: number) => void;
  onOk?: () => void;
}
  const NumberPadSection: React.FC<Props> = (props) => {
  const output = props.value.toString();
  const setOutput = (output: string) => {
    let value;
    if (output.length > 16) {
        value = parseFloat(output.slice(0, 16));
    } else if (output.length === 0) {
          value = 0;
    } else {
      value = parseFloat(output);
    }
  
    props.onChange(value);
  };
  const onClickButtonWrapper = (e: React.MouseEvent) => {
    const text = (e.target as HTMLButtonElement).textContent;
    if (text === null) {return;}
    if (text === 'OK') 
      if (props.onOk) {props.onOk();}
      return;
    }
        
   ```
        
 ### TagsSection部分:
  ```
   type Props = {
  value: string[];
  onChange: (selected: string[]) => void;
}
const TagsSection: React.FC<Props> = (props) => {
  const [tags, setTags] = useState<string[]>(['衣', '食', '住', '行']);
  const selectedTags = props.value;
     const onToggleTag = (tag: string) => {
    const index = selectedTags.indexOf(tag);
    if (index >= 0) {
      // 如果 tag 已被选中，就复制所有没有被选中的 tag，作为新的 selectedTag
      props.onChange(selectedTags.filter(t => t !== tag));
    } else {
      props.onChange([...selectedTags, tag]);
    }
  };
   ```
  根据我与重复不共戴天的原理，在Money.tsx里面。每一个子组件的onchange函数都是相同的，所以我们需要简化一下，将onchang函数做成一个公用的函数，然后数据就统通过参数的形式改变。
  ```
    const onChange = (obj: Partial<typeof selected>) => {
    setSelected({...selected, ...obj});
  };
     <TagsSection value={selected.tags} 
        onChange={tags => onChange({tags})}/>
 ```       
其他同理。

 