## 记账数据的管理
src目录下新建一个models目录，创建model.ts文件，将我们在记账页面收集到的数据进行增删改查管理
```
const localStorageKeyName = 'recordList';
const model = {
  clone(data: RecordItem[] | RecordItem) {
    return JSON.parse(JSON.stringify(data));
  },
  fetch() {
    return JSON.parse(window.localStorage.getItem(localStorageKeyName) || '[]') as RecordItem[];
  },
  save(data: RecordItem[]) {
    window.localStorage.setItem(localStorageKeyName, JSON.stringify(data));
  }
};

export default model; 
```
然后记账页面就用model暴露出来的api对数据进行操作,
```
import model from '@/model'
const recordList = model.fetch();
 saveRecord() {
      const record2: RecordItem = model.clone(this.record);
      record2.createdAt = new Date();
      this.recordList.push(record2);
    }
    @Watch('recordList')
    onRecordListChange() {
      model.save(this.recordList);
    }
  ```
 ## 标签数据管理
 对新增标签过程也做一个数据管理，models目录，创建tagListModel.ts文件夹
```
  const localStorageKeyName = 'tagList';
  type TagListModel = {
  data: string[]
  fetch: () => string[]
  create: (name: string) => 'success' | 'duplicated' // 联合类型
  save: () => void
  }
 const tagListModel: TagListModel = {
  data: [],
  fetch() {
    this.data = JSON.parse(window.localStorage.getItem(localStorageKeyName) || '[]');
    return this.data;
  },
  create(name) {
    if (this.data.indexOf(name) >= 0) {return 'duplicated';}
    this.data.push(name);
    this.save();
    return 'success';
  },
  save() {
    window.localStorage.setItem(localStorageKeyName, JSON.stringify(this.data));
  }
  }  ;
export default tagListModel;
```
## 错误提示
关于创建标签，函数`create: (name: string) => 'success' | 'duplicated'`的一些思考。如果返回值是boolean,true表示成功，false表示失败，或者`throw new Error('duplicated')` `try{}.catch(error){console.log(error.message)}`,或者返回数字，成功返回0，失败返回非零，返回对象`{code:number,message:string}`,也可以是上面的联合类型。
