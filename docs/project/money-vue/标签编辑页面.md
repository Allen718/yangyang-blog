## 制作标签编辑页面
### 样式制作
1. 已经成功的拿到了需要编辑标签的信息，现在可以开始制作编辑标签页面了。
2. 根据设计图知道，标签编辑页面和首页的notes组件很类似，尝试改造记账页面notes组件，使之成为通用组件,让notes接受外部数据，稍作修改就可以了
```
 <div>
    <label class="notes">
      <span class="name">{{this.fieldName}}</span>
      <input type="text"
             @input="onValueChanged($event.target.value)"
          :placeholder="this.placeholder">
    </label>
  </div>
   @Prop({required: true}) fieldName!: string;
    @Prop() placeholder?: string;
    @Prop({default: ''}) value!: string;
  ```
  修改引用到这个组件的组件，将原先的数据替换成外部传入数据，还有一些样式上的微调。
  
3. 制作button按钮，由于button 按钮在一个应用里面会多次出现，并且理论上，所有的按钮基本上格式应该一致，所以可以将button按钮单独做成一个组件，样式也封装好，谁用谁引入即可。
。
4. 完善标签编辑页面的顶部导航条。
### 功能实现
1. 编辑标签，删除标签
```
 <Icon class="leftIcon" name="left" @click="goBack"/>
 goBack() {
           this.$router.back();
    }
 <FormItem :value="tag.name"   @update:value="update" 
 field-name="标签名" placeholder="请输入标签名"/>
  update(name: string) {
      if (this.tag) {
        tagListModel.update(this.tag.id, name);
      }
    }
 <Button @click="remove">删除标签</Button>
    remove() {
      if (this.tag) {
        tagListModel.remove(this.tag.id);
      }
    }
 tag?: { id: string, name: string } = undefined;
  created() {
      const id = this.$route.params.id;
      tagListModel.fetch();
      const tags = tagListModel.data;
      const tag = tags.filter(t => t.id === id)[0];
      if (tag) {
        this.tag = tag;
      } else {
        this.$router.replace('/404');
      }
      }
 在tagList.ts标签数据管理里面增加更新和删除标签的api
       update(id, name) {
    const idList = this.data.map(item => item.id);
    if (idList.indexOf(id) >= 0) {
      const names = this.data.map(item => item.name);
      if (names.indexOf(name) >= 0) {
        return 'duplicated';
      } else {
        const tag = this.data.filter(item => item.id === id)[0];
        tag.name = name;
        this.save();
        return 'success';
      }
    } else {
      return 'not found';
    }
  },
  remove(id: string) {
    let index = -1;
    for (let i = 0; i < this.data.length; i++) {
      if (this.data[i].id === id) {
        index = i;
        break;
      }
    }
    this.data.splice(index, 1);
    this.save();
    return true;
  },
```
### 解决id生成问题
解决id问题，由于id先前时直接将标签名，就作为id名，这样是不对的，简单写一个id生成函数来自动生成id,新建一个叫createId.ts.
```
let id: number = parseInt(window.localStorage.getItem('_idMax') || '0') || 0;

function createId() {
  id++;
  return id;
}

export default createId; 
使用时
const id = createId().toString();
    this.data.push({id, name: name});
   ```
  ### 回退
   在删除标签时如果删除成功以后应该回到上一个页面，需要重新写一下删除函数，然后标签编辑页面基本完成
  ```
    remove() {
      if (this.tag) {
        tagListModel.remove(this.tag.id);
        if (tagListModel.remove(this.tag.id)) {
          this.$router.back();
        } else {
          window.alert('删除失败');
        }
      }
    }
  ```
  

  
       
